<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Technical Overview | Distributed Tracing Workshop</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/distributed-tracing-workshop/favicon.ico">
    <meta name="description" content="Distributed Tracing Workshop">
    <meta property="og:site_name" content="Distributed Tracing Workshop">
    <meta property="og:title" content="Technical Overview">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://alvsanand.github.io/distributed-tracing-workshop/technical_overview/">
    <meta property="og:image" content="https://alvsanand.github.io/distributed-tracing-workshop/img/distributed-tracing_practice_preview.png">
    <meta name="twitter:title" content="Technical Overview">
    <meta name="twitter:url" content="https://alvsanand.github.io/distributed-tracing-workshop/technical_overview/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://alvsanand.github.io/distributed-tracing-workshop/img/distributed-tracing_practice_preview.png">
    
    <link rel="preload" href="/distributed-tracing-workshop/assets/css/0.styles.a19eab89.css" as="style"><link rel="preload" href="/distributed-tracing-workshop/assets/js/app.6775e0d1.js" as="script"><link rel="preload" href="/distributed-tracing-workshop/assets/js/2.c94d9c33.js" as="script"><link rel="preload" href="/distributed-tracing-workshop/assets/js/4.9a78ff1b.js" as="script"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/10.2d3ec1a6.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/11.41c785af.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/12.c4f0c58b.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/13.6cf10b4b.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/3.8ef80796.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/5.3cf7cc20.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/6.b08bc6e7.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/7.cf86b5a0.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/8.ba6d7404.js"><link rel="prefetch" href="/distributed-tracing-workshop/assets/js/9.424d0cce.js">
    <link rel="stylesheet" href="/distributed-tracing-workshop/assets/css/0.styles.a19eab89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/distributed-tracing-workshop/" class="home-link router-link-active"><img src="/distributed-tracing-workshop/img/distributed-tracing_practice.png" alt="Distributed Tracing Workshop" class="logo"> <span class="site-name can-hide">Distributed Tracing Workshop</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/distributed-tracing-workshop/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="@alvsanand" class="dropdown-title"><span class="title">@alvsanand</span> <span class="arrow down"></span></button> <button type="button" aria-label="@alvsanand" class="mobile-dropdown-title"><span class="title">@alvsanand</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/alvsanand" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/alvsanand/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinekdIn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://bluetab.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bluetab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow down"></span></button> <button type="button" aria-label="Links" class="mobile-dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://opentracing.io/docs/overview/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenTracing
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jaegertracing.io/docs/latest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jaeger
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/distributed-tracing-workshop/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="@alvsanand" class="dropdown-title"><span class="title">@alvsanand</span> <span class="arrow down"></span></button> <button type="button" aria-label="@alvsanand" class="mobile-dropdown-title"><span class="title">@alvsanand</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/alvsanand" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/alvsanand/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinekdIn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://bluetab.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bluetab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><span class="title">Links</span> <span class="arrow down"></span></button> <button type="button" aria-label="Links" class="mobile-dropdown-title"><span class="title">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://opentracing.io/docs/overview/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenTracing
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jaegertracing.io/docs/latest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jaeger
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/distributed-tracing-workshop/" aria-current="page" class="sidebar-link">Distributed Tracing Workshop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/#goals" class="sidebar-link">Goals</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/#index" class="sidebar-link">Index</a></li></ul></li><li><a href="/distributed-tracing-workshop/technical_overview/" aria-current="page" class="active sidebar-link">Technical Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/technical_overview/#what-is-distributed-tracing" class="sidebar-link">What is Distributed Tracing?</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/technical_overview/#why-should-we-use-it" class="sidebar-link">Why should we use it?</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/technical_overview/#opentracing" class="sidebar-link">OpenTracing</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/technical_overview/#jaeger" class="sidebar-link">Jaeger</a></li></ul></li><li><a href="/distributed-tracing-workshop/laboratory-01/" class="sidebar-link">Lab 1 - Installing Jaeger</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_1-installing-minikube" class="sidebar-link">1. Installing Minikube</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_2-starting-the-cluster" class="sidebar-link">2. Starting the cluster</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_3-interacting-with-k8s" class="sidebar-link">3. Interacting with K8s</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_4-deploying-a-sample-application" class="sidebar-link">4. Deploying a sample application</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_5-deleting-minikube-cluster" class="sidebar-link">5. Deleting minikube cluster</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_6-deploying-jaeger-operator" class="sidebar-link">6. Deploying Jaeger Operator</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_7-deploying-jaeger-instance" class="sidebar-link">7. Deploying Jaeger instance</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-01/#_8-validating-jaeger-deployment" class="sidebar-link">8. Validating Jaeger deployment</a></li></ul></li><li><a href="/distributed-tracing-workshop/laboratory-02/" class="sidebar-link">Lab 2 - Using Jaeger</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-02/#_1-installing-hotrod" class="sidebar-link">1. Installing HotROD</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-02/#_2-using-hotrod" class="sidebar-link">2. Using HotROD</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-02/#_3-understanding-the-data-flow-of-an-application" class="sidebar-link">3. Understanding the Data Flow of an application</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-02/#_4-searching-the-source-of-a-bottleneck" class="sidebar-link">4. Searching the source of a bottleneck</a></li></ul></li><li><a href="/distributed-tracing-workshop/laboratory-03/" class="sidebar-link">Lab 3 - Integrating an app</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_1-install-the-application-as-is-in-k8s" class="sidebar-link">1. Install the application as is in K8s</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_2-integrating-flask-app-with-jaeger" class="sidebar-link">2. Integrating flask-app with Jaeger</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_3-integrating-sinatra-app-with-jaeger" class="sidebar-link">3. Integrating sinatra-app with Jaeger</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_4-propagating-the-tracing-http-headers" class="sidebar-link">4. Propagating the tracing HTTP headers</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_5-adding-children-spans" class="sidebar-link">5. Adding children spans</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_6-installing-modified-version-of-the-application-in-k8s" class="sidebar-link">6. Installing modified version of the application in k8s</a></li><li class="sidebar-sub-header"><a href="/distributed-tracing-workshop/laboratory-03/#_7-testing-the-application" class="sidebar-link">7. Testing the application</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="technical-overview"><a href="#technical-overview" class="header-anchor">#</a> Technical Overview</h1> <p>Before beginning with the workshop labs, we are going to learn more about distributed tracing, OpenTracing and Jaeger.</p> <blockquote><p>Most of this content is taken directly from the official documentation.</p></blockquote> <h2 id="what-is-distributed-tracing"><a href="#what-is-distributed-tracing" class="header-anchor">#</a> What is Distributed Tracing?</h2> <p>Distributed tracing is a set of tools and practices to monitor the health and reliability of a distributed application. A distributed application is an application that consists of multiple components that are deployed and operated separately. It is also known as micro-service.</p> <p>The main concept behind distributed tracing is event correlation. Event correlation is a way to correlate events from one component to the events from another. It allows to find the cause-and-effect relationship between these events. For instance - find which user action in a browser caused a failure in the business logic layer.</p> <p>To correlate events between components, these components need to exchange and store a piece of information called context. Typically context consists of an originating event identifier, an originating component identity and other event properties. Context has two parts. The first part is a trace context. Trace context consists of properties crucial for event correlation. The second part is baggage. Baggage carries user-defined properties. These properties may be helpful for correlation scenarios. But they are not required and components may choose to not carry or store them.</p> <h2 id="why-should-we-use-it"><a href="#why-should-we-use-it" class="header-anchor">#</a> Why should we use it?</h2> <p>IT and DevOps teams can use distributed tracing to monitor applications. Distributed tracing is particularly well-suited to debugging and monitoring modern distributed software architectures, such as microservices.</p> <p>Developers can use distributed tracing to help debug and optimize their code.</p> <h2 id="opentracing"><a href="#opentracing" class="header-anchor">#</a> OpenTracing</h2> <p><img src="/distributed-tracing-workshop/assets/img/opentracing.94e7cf87.png" alt="OpenTracing"></p> <blockquote><p>Last year, <a href="https://opentelemetry.io/" target="_blank" rel="noopener noreferrer">OpenTelemetry<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> was announced as a new CNCF sandbox project resulting from a merger of <strong>OpenTracing</strong> and <strong>OpenCensus</strong>.</p></blockquote> <p>In order to understand what OpenTracing is, it is probably easier to start with what OpenTracing is NOT.</p> <ul><li>OpenTracing is not a download or a program. Distributed tracing requires that software developers add instrumentation to the code of an application, or to the frameworks used in the application.</li> <li>OpenTracing is not a standard. The Cloud Native Computing Foundation (CNCF) is not an official standards body. The OpenTracing API project is working towards creating more standardized APIs and instrumentation for distributed tracing.</li></ul> <p>OpenTracing is comprised of an API specification, frameworks and libraries that have implemented the specification, and documentation for the project.</p> <p>OpenTracing allows developers to add instrumentation to their application code using APIs that do not lock them into any one particular product or vendor.</p> <h3 id="concepts"><a href="#concepts" class="header-anchor">#</a> Concepts</h3> <p><strong>Traces</strong> in OpenTracing are defined implicitly by their <strong>Spans</strong>. In particular, a <strong>Trace</strong> can be thought of as a directed acyclic graph (DAG) of <strong>Spans</strong>, where the edges between <strong>Spans</strong> are called <strong>References</strong>.</p> <p>For example, the following is an example <strong>Trace</strong> made up of 8 <strong>Spans</strong>:</p> <div class="language-other extra-class"><pre class="language-text"><code>Causal relationships between Spans in a single Trace


        [Span A]  ←←←(the root span)
            |
     +------+------+
     |             |
 [Span B]      [Span C] ←←←(Span C is a `ChildOf` Span A)
     |             |
 [Span D]      +---+-------+
               |           |
           [Span E]    [Span F] &gt;&gt;&gt; [Span G] &gt;&gt;&gt; [Span H]
                                       ↑
                                       ↑
                                       ↑
                         (Span G `FollowsFrom` Span F)

</code></pre></div><p>Sometimes it's easier to visualize <strong>Traces</strong> with a time axis as in the diagram below:</p> <div class="language-other extra-class"><pre class="language-text"><code>Temporal relationships between Spans in a single Trace


--|-------|-------|-------|-------|-------|-------|-------|-&gt; time

 [Span A···················································]
   [Span B··············································]
      [Span D··········································]
    [Span C········································]
         [Span E·······]        [Span F··] [Span G··] [Span H··]
</code></pre></div><h4 id="span"><a href="#span" class="header-anchor">#</a> Span</h4> <p>Each <strong>Span</strong> encapsulates the following state:</p> <ul><li>An operation name.</li> <li>A start timestamp.</li> <li>A finish timestamp.</li> <li>A set of zero or more key:value <strong>Span Tags</strong>. The keys must be strings. The values may be strings, bools, or numeric types.</li> <li>A set of zero or more <strong>Span Logs</strong>, each of which is itself a key:value map paired with a timestamp. The keys must be strings, though the values may be of any type. Not all OpenTracing implementations must support every value type.</li> <li>A <strong>SpanContext</strong>.</li> <li><strong>References</strong> to zero or more causally-related <strong>Spans</strong> (via the <strong>SpanContext</strong> of those related <strong>Spans</strong>).</li></ul> <p>Each <strong>SpanContext</strong> encapsulates the following state:</p> <ul><li>Any OpenTracing-implementation-dependent state (for example, trace and span ids) needed to refer to a distinct <strong>Span</strong> across a process boundary</li> <li><strong>Baggage Items</strong>, which are just key:value pairs that cross process boundaries</li></ul> <p>Span example:</p> <div class="language-other extra-class"><pre class="language-text"><code>    t=0            operation name: db_query               t=x

     +-----------------------------------------------------+
     | · · · · · · · · · ·    Span     · · · · · · · · · · |
     +-----------------------------------------------------+

Tags:
- db.instance:&quot;customers&quot;
- db.statement:&quot;SELECT * FROM mytable WHERE foo='bar'&quot;
- peer.address:&quot;mysql://127.0.0.1:3306/customers&quot;

Logs:
- message:&quot;Can't connect to mysql server on '127.0.0.1'(10061)&quot;

SpanContext:
- trace_id:&quot;abc123&quot;
- span_id:&quot;xyz789&quot;
- Baggage Items:
  - special_id:&quot;vsid1738&quot;
</code></pre></div><h4 id="tracer"><a href="#tracer" class="header-anchor">#</a> Tracer</h4> <p>A <strong>Tracer interface</strong> creates <strong>Spans</strong> and understands how to <strong>Inject</strong> (serialize) and <strong>Extract</strong> (deserialize) their metadata across process boundaries. It has the following capabilities:</p> <ul><li>Start a new Span.</li> <li>Inject a SpanContext into a carrier.</li> <li>Extract a SpanContext from a carrier.</li></ul> <p>A <strong>Tracer</strong> is the actual implementation that will record the Spans and publish them somewhere. How an application handles the actual Tracer is up to the developer: either consume it directly throughout the application or store it in the GlobalTracer for easier usage with instrumented frameworks.</p> <p>Different Tracer implementations vary in how and what parameters they receive at initialization time, such as:</p> <ul><li>Component name for this application’s traces.</li> <li>Tracing endpoint.</li> <li>Tracing credentials.</li> <li>Sampling strategy.</li> <li>Once a Tracer instance is obtained, it can be used to manually create Span, or pass it to existing instrumentation for frameworks and libraries.</li></ul> <p>In order to trace across process boundaries in distributed systems, services need to be able to continue the trace injected by the client that sent each request. OpenTracing allows this to happen by providing inject and extract methods that encode a span’s context into a carrier.</p> <p><img src="/distributed-tracing-workshop/assets/img/opentracing_extract.fc121b9f.png" alt="Propagating a Trace with Inject/Extract"></p> <h3 id="tracing-systems"><a href="#tracing-systems" class="header-anchor">#</a> Tracing Systems</h3> <p>As we said earlier Opentracing does not provide a specific implementation of tracing. Therefore, you must use a compatible Tracing System.</p> <p>The following table lists all currently known OpenTracing Tracers:</p> <table><thead><tr><th>Tracing system</th> <th>Supported languages</th></tr></thead> <tbody><tr><td><a href="https://www.jaegertracing.io/" target="_blank" rel="noopener noreferrer">CNCF Jaeger<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Java,Go,Python,Node.js,C++,C#</td></tr> <tr><td><a href="https://www.datadoghq.com/" target="_blank" rel="noopener noreferrer">Datadog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Go</td></tr> <tr><td><a href="https://www.inspectit.rocks/" target="_blank" rel="noopener noreferrer">inspectIT<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Java</td></tr> <tr><td><a href="https://www.instana.com/" target="_blank" rel="noopener noreferrer">Instana<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Crystal,Go,Java,Node.js,Python,Ruby</td></tr> <tr><td><a href="https://lightstep.com/" target="_blank" rel="noopener noreferrer">LightStep<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Go,Python,JavaScript,Objective-C,Java,PHP,Ruby,C++</td></tr> <tr><td><a href="https://www.stagemonitor.org/" target="_blank" rel="noopener noreferrer">stagemonitor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>Java</td></tr></tbody></table> <h2 id="jaeger"><a href="#jaeger" class="header-anchor">#</a> Jaeger</h2> <img align="left" src="/distributed-tracing-workshop/assets/img/jaeger.d3e55db3.png"> <p>Jaeger, inspired by <a href="https://research.google/pubs/pub36356/" target="_blank" rel="noopener noreferrer">Dapper<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="http://zipkin.io" target="_blank" rel="noopener noreferrer">OpenZipkin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, is a distributed tracing system released as open source by <strong>Uber Technologies</strong>.</p> <p>It is used for monitoring and troubleshooting microservices-based distributed systems, including:</p> <ul><li>Distributed context propagation</li> <li>Distributed transaction monitoring</li> <li>Root cause analysis</li> <li>Service dependency analysis</li> <li>Performance / latency optimization</li></ul> <h3 id="features"><a href="#features" class="header-anchor">#</a> Features</h3> <ul><li><a href="http://opentracing.io/" target="_blank" rel="noopener noreferrer">OpenTracing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> compatible data model and instrumentation libraries.</li> <li>Uses consistent upfront sampling with individual per service/endpoint probabilities.</li> <li>Multiple storage backends: Cassandra, Elasticsearch, memory.</li> <li>System topology graphs.</li></ul> <h3 id="architecture"><a href="#architecture" class="header-anchor">#</a> Architecture</h3> <p>Jaeger can be deployed either as all-in-one binary, where all Jaeger backend components run in a single process, or as a scalable distributed system, discussed below.</p> <p>There are two main deployment options:</p> <ol><li>Collectors are writing directly to storage.
<img src="/distributed-tracing-workshop/assets/img/jaeger_architecture_v1.50a4430e.png" alt="Jaeger archtiecture"></li> <li>Collectors are writing to Kafka as a preliminary buffer.
<img src="/distributed-tracing-workshop/assets/img/jaeger_architecture_v2.29bc9ca9.png" alt="Jaeger archtiecture"></li></ol> <p>The most important components of Jaeger are:</p> <ul><li><strong>Clients</strong> are language specific implementations of the <a href="https://opentracing.io" target="_blank" rel="noopener noreferrer">OpenTracing API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. They can be used to instrument applications for distributed tracing either manually or with a variety of existing open source frameworks, such as Flask, Dropwizard, gRPC, and many more, that are already integrated with OpenTracing.</li> <li><strong>Agent</strong> is a network daemon that listens for spans sent over UDP, which it batches and sends to the collector. It is designed to be deployed to all hosts as an infrastructure component. The agent abstracts the routing and discovery of the collectors away from the client.</li> <li><strong>Collector</strong> receives traces from Jaeger agents and runs them through a processing pipeline. Currently our pipeline validates traces, indexes them, performs any transformations, and finally stores them. Jaeger's storage is a pluggable component which currently supports <strong>Cassandra</strong>, <strong>Elasticsearch</strong> and <strong>Kafka</strong>.</li> <li><strong>Query</strong> is a service that retrieves traces from storage and hosts a UI to display them.</li> <li><strong>Ingester</strong> is a service that reads from Kafka topic and writes to another storage backend (Cassandra, Elasticsearch).</li></ul> <h3 id="sampling"><a href="#sampling" class="header-anchor">#</a> Sampling</h3> <p>Tracing every request has overhead in terms of application and large volumes of data. Therefore, Jaeger libraries implement consistent upfront (or head-based) sampling.</p> <p>Jaeger libraries support the following samplers:</p> <ul><li><strong>Constant</strong> sampler always makes the same decision for all traces. It either samples all traces or none of them.</li> <li><strong>Probabilistic</strong> sampler makes a random sampling decision with the probability of sampling equal to the value of sampler.param property.</li> <li><strong>Rate Limiting</strong> sampler uses a leaky bucket rate limiter to ensure that traces are sampled with a certain constant rate.</li> <li><strong>Remote</strong> sampler consults Jaeger agent for the appropriate sampling strategy to use in the current service. This allows controlling the sampling strategies in the services from a central configuration in Jaeger backend, or even dynamically (Adaptive Sampling).</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/distributed-tracing-workshop/" class="prev router-link-active">
        Distributed Tracing Workshop
      </a></span> <span class="next"><a href="/distributed-tracing-workshop/laboratory-01/">
        Lab 1 - Installing Jaeger
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/distributed-tracing-workshop/assets/js/app.6775e0d1.js" defer></script><script src="/distributed-tracing-workshop/assets/js/2.c94d9c33.js" defer></script><script src="/distributed-tracing-workshop/assets/js/4.9a78ff1b.js" defer></script>
  </body>
</html>
